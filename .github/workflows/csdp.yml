name: test CSDP
on: push

jobs:
  csdp:
    runs-on: ubuntu-24.04
    steps:
      - name: Install CSDP
        run: sudo apt install -y coinor-csdp
      - name: Create CSDP input file
        run: |
          cat << EOF > test.dat-s
          *SDPA file generated by SemidefiniteProgramming.m2
          1 =mdim
          1 =nblocks
          3
          -.7071067811865475
          0 1 1 1 -4.499999999999998
          0 1 1 3 3
          0 1 2 2 -2
          0 1 2 3 2.718281828459045
          0 1 3 3 -8.389056098930649
          1 1 1 1 -.7071067811865475
          EOF
      - name: Run CSDP
        run: |
          csdp test.dat-s test.out
          echo $?
          cat test.out
